(()=>{var l=(e,d,i)=>new Promise((s,n)=>{var u=t=>{try{r(i.next(t))}catch(o){n(o)}},a=t=>{try{r(i.throw(t))}catch(o){n(o)}},r=t=>t.done?s(t.value):Promise.resolve(t.value).then(u,a);r((i=i.apply(e,d)).next())});function c(e){return e}var f=c(e=>l(void 0,null,function*(){if(e.value!==void 0)return`echo ${e.value}!`}));function p(e){return e instanceof Date?e.toISOString():Array.isArray(e)?e.map(p):e}window.addEventListener("message",function(e){return l(this,null,function*(){var r;let{origin:d,data:{key:i,params:s}}=e,n,u;try{n=yield f(...s)}catch(t){n=void 0;try{u=t.toString()}catch(o){u="Exception can't be stringified."}}let a={key:i};n!==void 0&&(n=p(n),a.result={type:"string",value:n}),u!==void 0&&(a.error=u),((r=e.source)==null?void 0:r.postMessage).call(r,a,"*")})});})();
